---
title: "CSV / Folder Upload"
api: "POST https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder"
contentType: "form-data"
description: "This endpoint create a chatGPT app for a zip folder or csv file"
---

### Use Cases

**Customer Support Bot**
Use Case: Good for extracting responses from multiple documents (.zip file containing .pdf, .docx, .txt, .pptx files)

**Spreadsheet Question-Answering**
Use Case: Good for extracting responses from a .csv (e.g. which product is showing the highest MoM growth?, etc.)

**Advanced Editor**
Use Case: If you want to tinker and improve results for your Berri app. 


### Query

<ParamField query="user_email" type="string">
  Pass in your work / school email.
</ParamField>

<ParamField query="agent_type" type="string">
  Based on your intended scenario, you might need different agents. An agent is the wrapper Berri uses to query your data. Below, I'll outline how you should think about this.
  
  There are currently 3 types of agents you can set your app to: 
  1. **simple_support**: This should cover most scenarios. It takes your question -> queries the data you uploaded -> returns a response. 
  2. **complex_support**: This covers scenarios where you expect to be dealing with complex questions (e.g. those that require multiple sub-questions to be answered before returning a full response). Eg.: What is the age of the actor that plays Meg in Family Guy? (Requires 2 pieces of information: 1. who is the actor that plays Meg in Family Guy? 2. What is their age?)
  3. **data_analysis_agent**: This is for .csv files. If you want to ask questions that require conditional search, reasoning over the entire data, etc. (e.g. which product showed the highest YoY growth? which artist do i listen to the most? etc.)

</ParamField>

<ParamField query="search_type" type="string" optional>
  Want to improve your Berri app results? Use this! By defining search_type, you'll be able to control how you want your agent to search on your data (mainly effective for simple/complex support agents).

  There are currently 3 types of search strategies you can set your app to: 
  1. **simple_chunk**: This is the default. It involves breaking your data into small chunks and querying against it.
  2. **qa_gen**: For every chunk, we generate potential questions a user might ask about it. We then store both the chunk + generated questions together. This helps improve search results when real user questions come in.
  3. **summarize**: For every chunk, we summarize it and store the summaries. This is useful if you expect your data to have a lot of noise, which might impact search results. This is useful for processing code.
</ParamField>


<ParamField body="file" type="form-data">
  Upload the file (.csv or .zip) (e.g. Berri_Financial_Statement.csv)

  Note: for the .zip file, we unzip and parse for: .pdf, .pptx, .csv, .html, .docx, .txt
</ParamField>

<ParamField body="prompt" type="string">
  Customize the output of your app (e.g. having it follow a certain output pattern - `SQL Expression:`, or make it rewrite answers to follow your style - e.g. `You're an expert at writing exciting LinkedIn posts. Make sure you include emojis in your post.`). 
</ParamField>


### Response

<ResponseField name="api_endpoint" type="string">
  This will return an api endpoint which you can use to query your app.
</ResponseField>

<ResponseField name="website_endpoint" type="string">
  This will return a website endpoint which you can use for quick prototyping.  
</ResponseField>

A sample request for creating a Berri app from a csv file.
<RequestExample>

```bash curl
curl -X POST \
  'https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder?user_email={user_email}&agent_type={agent_type}' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \
  -F 'file=Berri_Financial_Statement.csv'
```
```javascript javascript
let endpoint = `https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder?user_email=${email}&agent_type=${agentType}`
if (fileContent !== null) {
  var formdata = new FormData();
  formdata.append("file", fileContent);
  formdata.append("prompt", prompt);
  var requestOptions = {
    method: 'POST',
    body: formdata,
    redirect: 'follow'
  };
  // @ts-ignore
  fetch(endpoint, requestOptions)
    .then(response => response.json())
    .then(result => {
      result = "https://" + result.website_endpoint
      console.log(result)
    })
    .catch(error => {
      console.log('error', error);
    });
}
```

```python python
import requests

url = "https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder"

querystring = {"user_email":"<your_work_or_school_email>","agent_type":"data_analysis_agent"}

files = {'file': open('mixpanel_data.csv', 'rb')}

response = requests.post(url, files=files)

print(response.text)
```

</RequestExample>

A sample request for creating a Berri app from a zip file.

<RequestExample>

```bash curl
curl -X POST \
  'https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder?user_email={user_email}&agent_type={agent_type}&search_type={search_type}' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \
  -F 'file=Berri_Financial_Statement.zip'
```
```javascript javascript
let endpoint = `https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder?user_email=${email}&agent_type=${agentType}`
if (searchType) {endpoint += `&search_type=${searchType}`}
if (fileContent !== null) {
  var formdata = new FormData();
  formdata.append("file", fileContent);
  formdata.append("prompt", prompt);
  var requestOptions = {
    method: 'POST',
    body: formdata,
    redirect: 'follow'
  };
  // @ts-ignore
  fetch(endpoint, requestOptions)
    .then(response => response.json())
    .then(result => {
      result = "https://" + result.website_endpoint
      console.log(result)
    })
    .catch(error => {
      console.log('error', error);
    });
}
```

```python python
import requests

url = "https://data-ingest-server-customer-support-template-v-2-mpvf.zeet-berri.zeet.app/berri_pipeline_folder"

querystring = {"user_email":"<your_work_or_school_email>","agent_type":"simple_support", "search_type": "simple_chunk"}

files = {'file': open('mixpanel_data.zip', 'rb')}

response = requests.post(url, files=files)

print(response.text)
```

</RequestExample>

This is a real response from Berri. Feel free to try the website_endpoint (hint: ask it about covid)
<ResponseExample>

```json Response
{
    "api_endpoint": "chat.berri.ai/aHR0cHM6Ly9zaGFyZWRpbmZyYXN0b3JlcXVlcnktcXFzMy56ZWV0LWJlcnJpLnplZXQuYXBwL2JlcnJpX3F1ZXJ5P3Byb2pfcGF0aD1pbmRleGVzL2tycmlzaGRob2xha2lhQGdtYWlsLmNvbS82NjJmMDZmMi04MGQ0LTQxMzQtYmYxMi0xMWZiM2JhMWEyODM=&query=<user_query>",
    "website_endpoint": "chat.berri.ai/aHR0cHM6Ly9zaGFyZWRpbmZyYXN0b3JlcXVlcnktcXFzMy56ZWV0LWJlcnJpLnplZXQuYXBwL2JlcnJpX3F1ZXJ5P3Byb2pfcGF0aD1pbmRleGVzL2tycmlzaGRob2xha2lhQGdtYWlsLmNvbS82NjJmMDZmMi04MGQ0LTQxMzQtYmYxMi0xMWZiM2JhMWEyODM="
}
```

</ResponseExample>
